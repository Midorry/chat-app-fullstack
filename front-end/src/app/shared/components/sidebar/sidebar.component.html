<nz-sider
  class="menu-sidebar"
  nzCollapsible
  [nzCollapsed]="true"
  [nzTrigger]="null"
>
  <div class="sider-content">
    <ul
      nz-menu
      nzTheme="dark"
      nzMode="inline"
      [nzInlineCollapsed]="true"
      class="menu-list"
    >
      <!-- <li
        nz-submenu
        nzTooltipTitle="Cá nhân"
        nz-tooltip
        nzTitle="Cá nhân"
        nzIcon="dashboard"
        nzTooltipPlacement="right"
      ></li> -->
      <li
        nz-submenu
        nzIcon="user"
        nzTooltipTitle="Hồ sơ"
        nzTooltipPlacement="right"
        nz-tooltip
        (click)="openProfileDialog()"
      ></li>
    </ul>

    <div class="logout-button" (click)="logout()">
      <i nz-icon nzType="logout"></i>
    </div>
  </div>
</nz-sider>
<nz-modal
  [(nzVisible)]="isVisible"
  nzTitle="Thông tin cá nhân"
  [nzStyle]="{ top: '30px' }"
  [nzClosable]="false"
  (nzOnCancel)="handleCancel()"
  (nzOnOk)="handleOk()"
>
  <ng-container *nzModalContent>
    <div nz-col [nzXs]="24" [nzSm]="24" [nzMd]="24" class="update-left">
      <form
        nz-form
        [formGroup]="updateForm"
        class="update-form"
        nzLayout="vertical"
      >
        <!-- Upload avatar -->
        <nz-upload
          class="avatar-uploader"
          nzName="avatar"
          [nzShowUploadList]="false"
          nzListType="picture-card"
          [nzBeforeUpload]="beforeUpload"
          [nzCustomRequest]="dummyRequest"
        >
          <ng-container *ngIf="!avatarUrl">
            <span
              class="upload-icon"
              nz-icon
              [nzType]="loading ? 'loading' : 'plus'"
            ></span>
            <div class="ant-upload-text">Upload</div>
          </ng-container>
          <img *ngIf="avatarUrl" [src]="avatarUrl" style="width: 100%" />
        </nz-upload>

        <!-- Tên người dùng -->
        <nz-form-item class="full-width">
          <nz-form-label nzRequired nzFor="userName"
            >Tên người dùng</nz-form-label
          >
          <nz-form-control
            [nzErrorTip]="
              updateForm.get('userName')?.hasError('required')
                ? 'Vui lòng nhập tên người dùng'
                : updateForm.get('userName')?.hasError('minlength')
                ? 'Tên người dùng phải có ít nhất 3 ký tự'
                : updateForm.get('userName')?.hasError('maxlength')
                ? 'Tên người dùng chỉ có nhiều nhất 10 ký tự'
                : undefined
            "
          >
            <input
              nz-input
              formControlName="userName"
              id="userName"
              class="form-input"
            />
          </nz-form-control>
        </nz-form-item>

        <!-- Email -->
        <nz-form-item>
          <nz-form-label nzRequired nzFor="email">E-mail</nz-form-label>
          <nz-form-control
            [nzErrorTip]="
              updateForm.get('email')?.hasError('required')
                ? 'Vui lòng nhập email!'
                : 'Email không hợp lệ'
            "
          >
            <input
              nz-input
              formControlName="email"
              id="email"
              class="form-input"
            />
          </nz-form-control>
        </nz-form-item>

        <!-- Mật khẩu -->
        <nz-form-item>
          <nz-form-label nzRequired nzFor="password">Mật khẩu</nz-form-label>
          <nz-form-control
            [nzErrorTip]="
              updateForm.get('password')?.hasError('required')
                ? 'Vui lòng nhập mật khẩu'
                : updateForm.get('password')?.hasError('minlength')
                ? 'Mật khẩu phải có ít nhất 6 ký tự'
                : undefined
            "
          >
            <input
              nz-input
              type="password"
              id="password"
              formControlName="password"
              class="form-input"
            />
          </nz-form-control>
        </nz-form-item>

        <!-- Xác nhận mật khẩu -->
        <nz-form-item>
          <nz-form-label nzRequired nzFor="confirmPassword"
            >Nhập lại mật khẩu</nz-form-label
          >
          <nz-form-control
            [nzErrorTip]="
              updateForm.get('confirmPassword')?.hasError('required')
                ? 'Vui lòng xác nhận mật khẩu'
                : updateForm.get('confirmPassword')?.hasError('confirmMismatch')
                ? 'Mật khẩu xác nhận không khớp'
                : undefined
            "
          >
            <input
              nz-input
              type="password"
              id="confirmPassword"
              formControlName="confirmPassword"
              class="form-input"
            />
          </nz-form-control>
        </nz-form-item>
      </form>
    </div>
  </ng-container>
  <ng-container *nzModalFooter>
    <button nz-button nzDanger (click)="handleCancel()">Đóng</button>
    <button nz-button (click)="handleOk()">Đồng ý</button>
  </ng-container>
</nz-modal>
